"use strict";
(self["webpackChunktaxonium"] = self["webpackChunktaxonium"] || []).push([["node_modules_jbrowse_plugin-alignments_esm_LinearPileupDisplay_components_FilterByTag_js"],{

/***/ "./node_modules/@jbrowse/plugin-alignments/esm/LinearPileupDisplay/components/FilterByTag.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@jbrowse/plugin-alignments/esm/LinearPileupDisplay/components/FilterByTag.js ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! mobx-react */ "./node_modules/mobx-react/dist/mobxreact.esm.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Link/Link.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Paper/Paper.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");
/* harmony import */ var tss_react_mui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tss-react/mui */ "./node_modules/tss-react/mui.js");
/* harmony import */ var _mui_icons_material_Close__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/icons-material/Close */ "./node_modules/@mui/icons-material/Close.js");





const useStyles = (0,tss_react_mui__WEBPACK_IMPORTED_MODULE_1__.makeStyles)()(theme => ({
    paper: {
        padding: theme.spacing(2),
        margin: theme.spacing(2),
    },
    closeButton: {
        position: 'absolute',
        right: theme.spacing(1),
        top: theme.spacing(1),
        color: theme.palette.grey[500],
    },
    field: {
        margin: theme.spacing(2),
    },
}));
const flagNames = [
    'read paired',
    'read mapped in proper pair',
    'read unmapped',
    'mate unmapped',
    'read reverse strand',
    'mate reverse strand',
    'first in pair',
    'second in pair',
    'not primary alignment',
    'read fails platform/vendor quality checks',
    'read is PCR or optical duplicate',
    'supplementary alignment',
];
function Bitmask(props) {
    const { flag = 0, setFlag } = props;
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], { type: "number", value: flag, onChange: event => setFlag(+event.target.value) }),
        flagNames.map((name, index) => {
            const val = flag & (1 << index);
            const key = `${name}_${val}`;
            return (react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { key: key },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", { type: "checkbox", checked: Boolean(val), onChange: event => {
                        if (event.target.checked) {
                            setFlag(flag | (1 << index));
                        }
                        else {
                            setFlag(flag & ~(1 << index));
                        }
                    } }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("label", { htmlFor: key }, name)));
        })));
}
function FilterByTagDlg(props) {
    var _a, _b;
    const { model, handleClose } = props;
    const { classes } = useStyles();
    const { filterBy } = model;
    const [flagInclude, setFlagInclude] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(filterBy === null || filterBy === void 0 ? void 0 : filterBy.flagInclude);
    const [flagExclude, setFlagExclude] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(filterBy === null || filterBy === void 0 ? void 0 : filterBy.flagExclude);
    const [tag, setTag] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(((_a = filterBy === null || filterBy === void 0 ? void 0 : filterBy.tagFilter) === null || _a === void 0 ? void 0 : _a.tag) || '');
    const [tagValue, setTagValue] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(((_b = filterBy === null || filterBy === void 0 ? void 0 : filterBy.tagFilter) === null || _b === void 0 ? void 0 : _b.value) || '');
    const [readName, setReadName] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((filterBy === null || filterBy === void 0 ? void 0 : filterBy.readName) || '');
    const validTag = tag.match(/^[A-Za-z][A-Za-z0-9]$/);
    const site = 'https://broadinstitute.github.io/picard/explain-flags.html';
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], { open: true, onClose: handleClose },
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], null,
            "Filter options",
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], { "aria-label": "close", className: classes.closeButton, onClick: handleClose },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Close__WEBPACK_IMPORTED_MODULE_6__["default"], null))),
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null,
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null,
                "Set filter bitmask options. Refer to ",
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], { href: site }, site),
                ' ',
                "for details"),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], { className: classes.paper, variant: "outlined" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { style: { display: 'flex' } },
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null,
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Read must have ALL these flags"),
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bitmask, { flag: flagInclude, setFlag: setFlagInclude })),
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null,
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Read must have NONE of these flags"),
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bitmask, { flag: flagExclude, setFlag: setFlagExclude })))),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], { className: classes.paper, variant: "outlined" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Filter by tag name and value. Use * in the value field to get all reads containing any value for that tag. Example: filter tag name SA with value * to get all split/supplementary reads. Other examples include HP for haplotype, or RG for read group"),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], { className: classes.field, value: tag, onChange: event => {
                        setTag(event.target.value);
                    }, placeholder: "Enter tag name", inputProps: {
                        maxLength: 2,
                        'data-testid': 'color-tag-name-input',
                    }, error: tag.length === 2 && !validTag, helperText: tag.length === 2 && !validTag ? 'Not a valid tag' : '', "data-testid": "color-tag-name" }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], { className: classes.field, value: tagValue, onChange: event => {
                        setTagValue(event.target.value);
                    }, placeholder: "Enter tag value", inputProps: {
                        'data-testid': 'color-tag-name-input',
                    }, "data-testid": "color-tag-value" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], { className: classes.paper, variant: "outlined" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], null, "Filter by read name"),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], { className: classes.field, value: readName, onChange: event => {
                        setReadName(event.target.value);
                    }, placeholder: "Enter read name", inputProps: {
                        'data-testid': 'color-tag-readname-input',
                    }, "data-testid": "color-tag-readname" })),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], null,
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], { variant: "contained", color: "primary", autoFocus: true, type: "submit", onClick: () => {
                        model.setFilterBy({
                            flagInclude,
                            flagExclude,
                            readName,
                            tagFilter: tag !== ''
                                ? {
                                    tag,
                                    value: tagValue,
                                }
                                : undefined,
                        });
                        handleClose();
                    } }, "Submit"),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_12__["default"], { variant: "contained", color: "secondary", onClick: () => handleClose() }, "Cancel")))));
}
/* harmony default export */ __webpack_exports__["default"] = ((0,mobx_react__WEBPACK_IMPORTED_MODULE_13__.observer)(FilterByTagDlg));
//# sourceMappingURL=FilterByTag.js.map

/***/ })

}]);
//# sourceMappingURL=node_modules_jbrowse_plugin-alignments_esm_LinearPileupDisplay_components_FilterByTag_js.bundle.js.map