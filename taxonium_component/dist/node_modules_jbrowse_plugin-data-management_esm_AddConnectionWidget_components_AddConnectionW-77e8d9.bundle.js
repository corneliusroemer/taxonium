"use strict";
(self["webpackChunktaxonium"] = self["webpackChunktaxonium"] || []).push([["node_modules_jbrowse_plugin-data-management_esm_AddConnectionWidget_components_AddConnectionW-77e8d9"],{

/***/ "./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/AddConnectionWidget.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/AddConnectionWidget.js ***!
  \****************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _jbrowse_core_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jbrowse/core/util */ "./node_modules/@jbrowse/core/util/index.js");
/* harmony import */ var _jbrowse_core_util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_jbrowse_core_util__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Stepper/Stepper.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Step/Step.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/StepLabel/StepLabel.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/StepContent/StepContent.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");
/* harmony import */ var tss_react_mui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tss-react/mui */ "./node_modules/tss-react/mui.js");
/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! mobx-react */ "./node_modules/mobx-react/dist/mobxreact.esm.js");
/* harmony import */ var mobx_state_tree__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mobx-state-tree */ "./node_modules/mobx-state-tree/dist/mobx-state-tree.module.js");
/* harmony import */ var _ConfigureConnection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ConfigureConnection */ "./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConfigureConnection.js");
/* harmony import */ var _ConnectionTypeSelect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConnectionTypeSelect */ "./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConnectionTypeSelect.js");






// locals


const useStyles = (0,tss_react_mui__WEBPACK_IMPORTED_MODULE_2__.makeStyles)()(theme => ({
    root: {
        marginTop: theme.spacing(1),
    },
    stepper: {
        backgroundColor: theme.palette.background.default,
    },
    button: {
        marginTop: theme.spacing(1),
        marginRight: theme.spacing(1),
    },
    actionsContainer: {
        marginBottom: theme.spacing(2),
    },
}));
const steps = ['Select a Connection Type', 'Configure Connection'];
function AddConnectionWidget({ model }) {
    const [connectionType, setConnectionType] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});
    const [configModel, setConfigModel] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});
    const [configModelReady, setConfigModelReady] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);
    const [activeStep, setActiveStep] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);
    const { classes } = useStyles();
    const session = (0,_jbrowse_core_util__WEBPACK_IMPORTED_MODULE_1__.getSession)(model);
    const { pluginManager } = (0,mobx_state_tree__WEBPACK_IMPORTED_MODULE_5__.getEnv)(session);
    function handleSetConnectionType(newConnectionType) {
        setConnectionType(newConnectionType);
        setConfigModel(newConnectionType.configSchema.create({
            connectionId: `${newConnectionType.name}-${Date.now()}`,
        }, (0,mobx_state_tree__WEBPACK_IMPORTED_MODULE_5__.getEnv)(model)));
    }
    function stepContent() {
        switch (activeStep) {
            case 0:
                return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ConnectionTypeSelect__WEBPACK_IMPORTED_MODULE_4__["default"], { connectionTypeChoices: pluginManager.getElementTypesInGroup('connection'), connectionType: connectionType, setConnectionType: handleSetConnectionType }));
            case 1:
                return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ConfigureConnection__WEBPACK_IMPORTED_MODULE_3__["default"], { connectionType: connectionType, model: configModel, setModelReady: setConfigModelReady }));
            default:
                return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, "Unknown step");
        }
    }
    function handleNext() {
        if (activeStep === steps.length - 1) {
            handleFinish();
        }
        else {
            setActiveStep(activeStep + 1);
        }
    }
    function handleBack() {
        setActiveStep(activeStep - 1);
    }
    function handleFinish() {
        const connectionConf = session.addConnectionConf(configModel);
        session.makeConnection(connectionConf);
        session.hideWidget(model);
    }
    function checkNextEnabled() {
        if ((activeStep === 0 && connectionType.name) ||
            (activeStep === 1 && configModel && configModelReady)) {
            return true;
        }
        return false;
    }
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: classes.root },
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], { className: classes.stepper, activeStep: activeStep, orientation: "vertical" }, steps.map(label => (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], { key: label },
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, label),
            react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], null,
                stepContent(),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: classes.actionsContainer },
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], { disabled: activeStep === 0, onClick: handleBack, className: classes.button }, "Back"),
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], { disabled: !checkNextEnabled(), variant: "contained", color: "primary", onClick: handleNext, className: classes.button, "data-testid": "addConnectionNext" }, activeStep === steps.length - 1 ? 'Connect' : 'Next')))))))));
}
AddConnectionWidget.propTypes = {
    model: mobx_react__WEBPACK_IMPORTED_MODULE_12__.PropTypes.observableObject.isRequired,
};
/* harmony default export */ __webpack_exports__["default"] = ((0,mobx_react__WEBPACK_IMPORTED_MODULE_12__.observer)(AddConnectionWidget));
//# sourceMappingURL=AddConnectionWidget.js.map

/***/ }),

/***/ "./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConfigureConnection.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConfigureConnection.js ***!
  \****************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _jbrowse_plugin_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jbrowse/plugin-config */ "./node_modules/@jbrowse/plugin-config/esm/index.js");
/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mobx-react */ "./node_modules/mobx-react/dist/mobxreact.esm.js");



const ConfigureConnection = (0,mobx_react__WEBPACK_IMPORTED_MODULE_2__.observer)(props => {
    const { connectionType, model, setModelReady } = props;
    const ConfigEditorComponent = connectionType.configEditorComponent || _jbrowse_plugin_config__WEBPACK_IMPORTED_MODULE_1__.ConfigurationEditor;
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null, "Loading...") },
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConfigEditorComponent, { model: { target: model }, setModelReady: setModelReady })));
});
/* harmony default export */ __webpack_exports__["default"] = (ConfigureConnection);
//# sourceMappingURL=ConfigureConnection.js.map

/***/ }),

/***/ "./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConnectionTypeSelect.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/@jbrowse/plugin-data-management/esm/AddConnectionWidget/components/ConnectionTypeSelect.js ***!
  \*****************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/IconButton/IconButton.js");
/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");
/* harmony import */ var _mui_icons_material_OpenInNew__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/icons-material/OpenInNew */ "./node_modules/@mui/icons-material/OpenInNew.js");



function ConnectionTypeSelect(props) {
    const { connectionTypeChoices, connectionType, setConnectionType } = props;
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        if (!connectionType.name) {
            setConnectionType(connectionTypeChoices[0]);
        }
    });
    function handleChange(event) {
        setConnectionType(connectionTypeChoices.find((connectionTypeChoice) => connectionTypeChoice.name === event.target.value));
    }
    if (!connectionType.name) {
        return null;
    }
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement("form", { autoComplete: "off" },
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_1__["default"], { value: connectionType.name, label: "connectionType", helperText: connectionType.description ? (react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,
                connectionType.description,
                connectionType.url ? (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], { href: connectionType.url, rel: "noopener noreferrer", target: "_blank", color: "secondary" },
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_OpenInNew__WEBPACK_IMPORTED_MODULE_3__["default"], null))) : null)) : null, select: true, fullWidth: true, onChange: handleChange, variant: "outlined" }, connectionTypeChoices.map((connectionTypeChoice) => (react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], { key: connectionTypeChoice.name, value: connectionTypeChoice.name }, connectionTypeChoice.displayName || connectionTypeChoice.name))))));
}
/* harmony default export */ __webpack_exports__["default"] = (ConnectionTypeSelect);
//# sourceMappingURL=ConnectionTypeSelect.js.map

/***/ }),

/***/ "./node_modules/@mui/icons-material/OpenInNew.js":
/*!*******************************************************!*\
  !*** ./node_modules/@mui/icons-material/OpenInNew.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {



var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ "./node_modules/@mui/icons-material/node_modules/@babel/runtime/helpers/interopRequireDefault.js");

Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports["default"] = void 0;

var _createSvgIcon = _interopRequireDefault(__webpack_require__(/*! ./utils/createSvgIcon */ "./node_modules/@mui/icons-material/utils/createSvgIcon.js"));

var _jsxRuntime = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");

var _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)("path", {
  d: "M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"
}), 'OpenInNew');

exports["default"] = _default;

/***/ })

}]);
//# sourceMappingURL=node_modules_jbrowse_plugin-data-management_esm_AddConnectionWidget_components_AddConnectionW-77e8d9.bundle.js.map